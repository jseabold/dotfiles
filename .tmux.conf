# Usage:
# - Prefix is set to Ctrl-s (make sure you remapped Caps Lock to Ctrl)
# - All prefixed with Ctrl-s
#   - Last used window: /
#   - Last used pane:   ;
#   - Vertical split:   v
#   - Horizontal split: s
#   - Previous window:  [
#   - Next window:      ]
#   - Choose session:   Ctrl-s
#   - Quick window:     Ctrl-q

set-window-option -g clock-mode-colour colour64

if-shell "uname | grep -q Darwin" "set -g mouse on" "set -g mode-mouse on"
setw -g mode-keys vi

# Keys

# New PREFIX
unbind C-b
set-option -g prefix C-s
bind C-s send-prefix

# Moving around panes
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# resize panes like vim
bind < resize-pane -L 10
bind > resize-pane -R 10
bind - resize-pane -D 10
bind + resize-pane -U 10

unbind {
bind { swap-pane -D
unbind }
bind } swap-pane -U

# go to same directory has current pane when opening a new one
bind c new-window -c "#{pane_current_path}"


unbind r
bind r source-file ~/.tmux.conf\; display "Reloaded"

bind Escape copy-mode

unbind [
bind ] previous-window
unbind ]
bind ] next-window

unbind p
bind p paste-buffer

bind-key -t vi-copy 'V' begin-selection
bind-key -t vi-copy 'y' copy-selection

# Split window with s and v
unbind %
bind s split-window -v -c "#{pane_current_path}"
unbind '"'
bind v split-window -h -c "#{pane_current_path}"


# pbcopy / pbpaste on osx
# move tmux copy buffer into x clipboard
# bind C-y run "tmux save-buffer - | xclip -i -selection clipboard"
bind C-y run "tmux save-buffer -| pbcopy"
# move x clipboard into tmux paste buffer
# bind C-p run "tmux set-buffer \"$(xclip -o)\"; tmux paste-buffer"
# bind C-v run "tmux set-buffer \"$(pbpaste)\"; tmux paste-buffer"
